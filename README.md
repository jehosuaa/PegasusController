# PegasusController
Implementación del controlador para un robot pegasus 2

ARCHIVOS EXISTENTES

    - manejo3ENCODERS: Contiene los archivos necesarios para el funcionamiento del robot, tiene implementada la recepción y envío de datos hacia la máquina.
    - sketch_may20a: Tiene las funciones necesarias para calcular la cinematica inversa que no fue implementada.
    - app1: Aplicación de MatLab 2022a realizada para manejar la máquina, se puede correr en versiones más actuales de MatLab.
    - RecArd: Código diseñado para conectarse a un Arduino UNO y poder ver qué datos llegan desde MatLab.
    - RecMatSenArd: Sketch que debe ser cargado en Arduino DUE para enviar datos y verificar el comando.

TUTORIAL:

- REVISAR LAS CONEXIONES DE LOS CABLES DB15 Y DB25 AL ROBOT Y A LAS TARJETAS.
- CALCULAR EL ESPACIO NECESARIO PARA DESARROLLAR LOS MOVIMIENTOS CON COMODIDAD.
- VERIFICAR QUE LA MÁQUINA ESTÉ CONECTADA A LA RED VIENDO EL PILOTO VERDE ENCENDIDO.
- ENSAMBLAR EL ARDUINO DUE A LA TARJETA ELECTRÓNICA.
- ABRIR ARDUINO IDE CON EL SKETCH manejo3ENCODERS Y CONECTARLO AL PC CON EL PROGRAMMING PORT. SI TODO HA FUNCIONADO BIEN EL ROBOT DEBERÍA EMPEZAR A MOVERSE.
- UNA VEZ CARGADO EL ARCHIVO DESCONECTAR, RECORDAR EL PUERTO USADO POR ARDUINO Y ABRIR APLICACION DE MATLAB.
- ANTES DE CORRER LA APLICACIÓN VERIFICAR QUE EL PUERTO COM DEFINIDO EN EL STARTUP DE LA APLICACION COINCIDA CON NUESTRO ARDUINO.
- SI TODO SALE BIEN EL ROBOT DEBERÁ QUEDARSE EN UNA POSICION ESTABLECIDA COMO homePos HASTA QUE EL USUARIO INDIQUE OTRA FUNCION.

*********************************************************************************************************************************************

MANEJO DE LA APLICACION:

- EN LA APLICACION DISEÑADA SE ENCUENTRAN 12 BOTONES, 5 INCREMENTALES, 5 DECREMENTALES Y DOS DEDICADOS A LA PINZA. CADA UNO DE LOS PRIMEROS TIENEN ASOCIADO UN CAMPO NUMERICO QUE INDICA LA POSICION DEL ROBOT EN ESE MOMENTO, UNA VEZ EMPIEZA A CAMBIAR CLICKEANDO LOS BOTONES NO VEREMOS CAMBIOS INMEDIATOS EN LA MÁQUINA, POR EL CONTRARIO, ES NECESARIO PRESIONAR EL BOTON ANGULOS PARA ENVIAR LA INFORMACIÓN Y QUE SE EJECUTE. 
- OTRA OPCION QUE TENEMOS ES DEMO, EN ESTA FUNCION EL ROBOT SE UBICARÁ EN LA POSICIÓN INICIAL, LUEGO, TRAS UNA SECUENCIA DE MOVIMIENTOS VOLVERÁ A LA POSICIÓN INICIAL Y TERMINARÁ EL DEMO.
- MOVER EL SLIDER DE VELOCIDAD MODIFICARÁ LA VELOCIDAD DE LOS MOTORES EN SU PROXIMO MOVIMIENTO.
- EL BOTON TERMINAR CIERRA LA COMUNICACIÓN SERIAL, LIBERA Y CIERRA EL PUERTO, TAMBIEN CIERRA LA VENTANA.

*********************************************************************************************************************************************

CÓMO UBICAR LA GARRA*:

- SI YA SE CONECTÓ EL ARDUINO ESPERAR A QUE LA POSICION DEL EJE 1 Y 2 SEA RESUELTA Y DESCONECTAR EL CONTROLADOR. NO NECESITA MOVER EL EJE 3 YA QUE PUEDE HABER CHOQUES. 
- MOVER MANUALMENTE LA GARRA PARA EVITAR CHOQUES
- DEJAR CAER EL TERCER EJE POR INERCIA
- UBICAR MANUALMENTE EL MANIPULADOR OBSERVANDO HACIA LA BASE MANTENIENDO ABAJO EL TERCER EJE.
- CONECTAR CONTROLADOR Y ESPERAR A QUE UBIQUE EL EJE 3 PARA ENCONTRAR LA POSICIÓN DE LA GARRA.

*FUNCIONES COMENTADAS EN EL CÓDIGO PRINCIPAL DEL PROGRAMA PUEDEN CONDUCIR A CHOQUES DE LA GARRA CON EL SEGUNDO BRAZO DEL ROBOT*

*********************************************************************************************************************************************

ARCHIVOS ADICIONALES:

- LOS CÓDIGOS DE ARDUINO GENERADOS SON PARA COMUNICAR DOS ARDUINOS ENTRE SI E IMPRIMIR LA INFORMACIÓN QUE LLEGA DESDE MATLAB A UNO E IMPRIMIRLA EN EL MONITOR SERIAL DEL OTRO.
- EL PRIMER PASO ES SUBIR LOS DOS SKETCHS A SUS RESPECTIVOS ARDUINO, GUARDAR LA INFORMACION DEL PUERTO COM DEL DUE.
- DESCONECTAR EL ARDUINO DUE, TENER LISTA LA APLICACIÓN DE MATLAB Y VERIFICAR QUE EL PUERTO COINCIDA.
- ABRIR APLICACION DE MATLAB Y CONECTAR EL PIN 18 DEL DUE LLAMADO "TX1" CON EL PIN 1 RX DEL UNO.
- ABRIR EL MONITOR SERIAL DEL CODIGO RecArd Y EMPEZAR A ENVIAR MENSAJES EN LA APLICACION.
- SI TODO HA IDO BIEN EL MONITOR SERIAL MOSTRARÁ EL MENSAJE QUE FUE TRANSMITIDO.